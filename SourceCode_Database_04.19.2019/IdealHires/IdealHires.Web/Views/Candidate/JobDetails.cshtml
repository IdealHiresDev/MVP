@model IdealHires.DTO.Candidate.JobDTO
@{
    AjaxOptions options = new AjaxOptions();
    options.HttpMethod = "POST";
    options.OnSuccess = "OnJobDetailsSuccess";
    options.InsertionMode = InsertionMode.ReplaceWith;
}

<section class="header-bg">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <h2>Job Details</h2>
            </div>
        </div>
    </div>
</section>
<section class="mt-5">
    @using (Ajax.BeginForm("JobDetails", "Candidate", null, options, new { @id = "formJobDetails" }))
    {
        <div class="mb-3">
            <div class="container">
                <div class="row">
                    <div class="col-xs-12 col-sm-10 col-md-10 col-lg-10">
                        <div class="pt-1">
                            <div class="card rounded-0">
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col-md-6 col-xs-12">
                                            <div class=" float-left pr-3 mb-3">
                                                <a>
                                                    @if (Model.Img != null)
                                                    {
                                                        <img src="@String.Format(" data:image/png;base64,{0}", Convert.ToBase64String(Model.Img))" id="imgLogo" name="imgLogo" style="width:50px;height:50px;" />
                                                    }
                                                    else
                                                    {
                                                        <img class="img-responsive" src="~/images/demo-logo4.png">
                                                    }
                                                    @*<img src="~/images/demo-logo1.png" class="job-detail-company-img">*@
                                                </a>
                                            </div>
                                            <div class="pull-left">
                                                <p class="h3 blue-clr text-left h4-d-sm mb-1">
                                                    @Model.Title
                                                    @Html.HiddenFor(m => m.Id)
                                                </p>
                                                <p>
                                                    @Model.CompanyName
                                                </p>
                                                <small class="text-left ft-12 col-grey">

                                                    @Model.CurrencyName
                                                    $@string.Format("{0:#.00}", Model.MinimumSalary)
                                                    @if (Model.MaximumSalary != null && Model.MaximumSalary != 0)
                                                    {
                                                        var maxSal = string.Concat("- $ ", string.Format("{0:#.00}", Model.MaximumSalary));
                                                        <span> @maxSal</span>
                                                    }
                                                </small>
                                                <p class="h5 text-dark text-left h4-d-sm mt-2">


                                                </p>
                                            </div>
                                        </div>
                                        <div class="col-md-6 col-xs-12 float-right">
                                            <div class="sm-menu-detail float-right ft-sml">
                                                <ul>
                                                    <li class="">
                                                        <i class="fa fa-suitcase"></i>
                                                        @Model.JobTypeName
                                                    </li>
                                                    <li>
                                                        <i class="fa fa-map-marker-alt"></i>
                                                        @Model.LocationCity
                                                    </li>
                                                    <li class="text-success">@Convert.ToDateTime(Model.ExpiredAt).ToString("MMM dd,yyyy")</li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="col-md-12 text-right job-detail-share-section">

                                            @if (Model.ProfileJobs != null)
                                            {
                                                if ((Model.ProfileJobs.Any(i => i.ActionId == 1) == true) ||
                                                    (Model.ProfileJobs.Any(i => i.ActionId == 2) == true) ||
                                                    (Model.ProfileJobs.Any(i => i.ActionId == 3) == true) ||
                                                    (Model.ProfileJobs.Any(i => i.ActionId == 4) == true)
                                                    )
                                                {
                                                    <input type="submit" class="btn btn-outline-grey pl-3 pr-3" disabled name="submit" value="Apply Now" />
                                                    <a href="mailto:abc@abc.com?Subject=ABC&Body=Body" class="btn btn-outline-grey pl-3 pr-3" title="Email to Friend">Email to Friend</a>
                                                    <input type="submit" class="btn btn-outline-grey pl-3 pr-3" disabled name="submit" value="Save this Job" />
                                                    <input type="submit" class="btn btn-outline-grey pl-3 pr-3" disabled name="submit" value="Not Interested" />
                                                }
                                                else
                                                {
                                                    <input type="submit" class="btn btn-outline-grey pl-3 pr-3" name="submit" value="Apply Now" />
                                                    <a href="mailto:abc@abc.com?Subject=ABC&Body=Body" class="btn btn-outline-grey pl-3 pr-3" title="Email to Friend">Email to Friend</a>                                                   
                                                    <input type="submit" class="btn btn-outline-grey pl-3 pr-3" name="submit" value="Save this Job" />
                                                    <input type="submit" class="btn btn-outline-grey pl-3 pr-3" name="submit" value="Not Interested" />
                                                }

                                            }
                                            else
                                            {
                                                <input type="submit" class="btn btn-outline-grey pl-3 pr-3" name="submit" value="Apply Now" />
                                                <a href="mailto:abc@abc.com?Subject=ABC&Body=Body" class="btn btn-outline-grey pl-3 pr-3" title="Email to Friend">Email to Friend</a>
                                                <input type="submit" class="btn btn-outline-grey pl-3 pr-3" name="submit" value="Save this Job" />
                                                <input type="submit" class="btn btn-outline-grey pl-3 pr-3" name="submit" value="Not Interested" />
                                            }

                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-12">
                                            <div class="mb-3">
                                                <h2 class="detail-title">Job Title</h2>
                                            </div>
                                            <p class="job-description-content">
                                                @Model.Title
                                            </p>

                                        </div>

                                    </div>
                                    <div class="row">
                                        <div class="col-md-12">
                                            <div class="mb-3">
                                                <h2 class="detail-title">Job Type</h2>
                                            </div>
                                            <p class="job-description-content">
                                                @Model.JobTypeName
                                            </p>

                                        </div>

                                    </div>
                                    <div class="row">
                                        <div class="col-md-12">
                                            <div class="mb-3">
                                                <h2 class="detail-title">Salary</h2>
                                            </div>
                                            <p class="job-description-content">
                                                $ @string.Format("{0:#.00}", Convert.ToDecimal(Model.MinimumSalary))
                                                @if (Model.MaximumSalary != null && Model.MaximumSalary != 0)
                                                {
                                                    var maxSalary = string.Concat("- $ ", string.Format("{0:#.00}", Convert.ToDecimal(Model.MaximumSalary)));
                                                    <span> @maxSalary</span>
                                                }
                                            </p>

                                        </div>

                                    </div>
                                    <div class="row">
                                        <div class="col-md-12">
                                            <div class="mb-3">
                                                <h2 class="detail-title">Job Description</h2>
                                            </div>
                                            <p class="job-description-content">
                                                @Model.Description
                                            </p>

                                        </div>

                                    </div>
                                    <div class="row">
                                        <div class="col-md-12">
                                            <div class="mb-3">
                                                <h2 class="detail-title">Category</h2>
                                            </div>
                                            <p class="job-description-content">
                                                @Model.JobCategoryName
                                            </p>

                                        </div>

                                    </div>
                                    <div class="row mt-5">
                                        <div class="col-md-12">
                                            <div class="mb-3">
                                                <h2 class="detail-title">Address</h2>
                                            </div>
                                            <p class="job-description-content">
                                               @Model.LocationCity @Model.LocationState @Model.LocationCountry
                                             </p>
                                        </div>

                                    </div>
                                    <div class="row mt-5" style="display:none;">
                                        <div class="col-md-12">
                                            <div class="mb-3">
                                                <h2 class="detail-title">Responsibilities</h2>
                                            </div>
                                            @Html.Raw(Model.Responsibilities)
                                        </div>

                                    </div>
                                    <div class="row mt-5" style="display:none;">
                                        <div class="col-md-12">
                                            <div class="mb-3">
                                                <h2 class="detail-title">Skills Requirements</h2>
                                            </div>
                                            <ul class="skills">
                                                <li>@Model.Keywords</li>
                                            </ul>
                                        </div>

                                    </div>                                   

                                </div>
                            </div>
                        </div>



                        <div class="row" style="display: none;">
                            <div class="col-lg-12">
                                <h3 class="blue-clr mt-5 pt-3 mb-3"><span class="text-dark">Applicant</span></h3>
                               
                                <div class="table-responsive cus-width">
                                    <table id="datatable" class="table table-striped table-bordered" style="width:100%">
                                        <thead>
                                            <tr>
                                                <th></th>
                                                <th>Company</th>
                                                <th>Posted Position</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <th>IBM</th>
                                                <td><em class="fa fa-thumbtack col-blue pr-1"></em> by Christin</td>
                                                <td>
                                                    <a href="#"><em class="fa fa-user col-blue pr-1"></em></a>
                                                    <a href="#"><em class="fa fa-envelope text-success pr-1"></em></a>
                                                    <a href="#"><em class="fa fa-minus-circle text-danger"></em></a>
                                                </td>
                                            </tr>
                                            <tr>
                                                <th>IBM</th>
                                                <td></td>
                                                <td>
                                                    <a href="#"><em class="fa fa-user col-blue pr-1"></em></a>
                                                    <a href="#"><em class="fa fa-envelope text-success pr-1"></em></a>
                                                    <a href="#"><em class="fa fa-minus-circle text-danger"></em></a>
                                                </td>
                                            </tr>
                                            <tr>
                                                <th>IBM</th>
                                                <td><em class="fa fa-thumbtack col-blue pr-1"></em> by Roger</td>
                                                <td>
                                                    <a href="#"><em class="fa fa-user col-blue pr-1"></em></a>
                                                    <a href="#"><em class="fa fa-envelope text-success pr-1"></em></a>
                                                    <a href="#"><em class="fa fa-minus-circle text-danger"></em></a>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="text-center col-sm-2 text-sm-right add-sm-none"> <a href="/" class=""><img src="~/images/advertisement.png" alt="logo" class="logo"></a> </div>
                </div>
            </div>




        </div>
    }
</section>




<script type="text/javascript">
    function OnJobDetailsSuccess(data) {
        //alert(data.Message);
        if (data.Success == true) {
            ToastMessageSuccess();
            $(".btn").attr("disabled", "disabled");
            $(".btn").attr("Text-Decoration", "none");
        }
        else {
            ToastWarningSuccess();
        }
    }
    $(document).ready(function () {
        $("#btnApplyJob").click(function () {
            var Id = $("#Id").val()
            //alert(Id);
            $.ajax({
                url: "./Candidate/JobApplied",
                type:"GET",
                success: function (data) { },
                error: function (xHr, status, res) {
                }
            });
        });
    });
   

</script>